{
  "inicio": "2025-12-11T17:44:35.794Z",
  "fim": "2025-12-11T17:46:14.145Z",
  "categorias": {
    "sintaxe": {
      "total": 201,
      "passou": 201,
      "falhou": 0,
      "pulou": 0,
      "detalhes": []
    },
    "apis": {
      "total": 3,
      "passou": 1,
      "falhou": 2,
      "pulou": 0,
      "detalhes": [
        {
          "teste": "ValidaÃ§Ã£o de Endpoints",
          "status": "FALHOU",
          "erro": "Command failed: npm run test:validate\n",
          "output": "\n> ouvidoria-dashboard@3.0.0 test:validate\n> node scripts/test/validate-endpoints.js\n\nğŸ” Validando todos os endpoints...\n\nâŒ Dashboard Data: FAILED (401)\n\nâŒ Summary: FAILED (401)\n\nâŒ Records: FAILED (401)\n\nâŒ Filter Aggregated: FAILED (401)\n\nâŒ Filter: FAILED (401)\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nâœ… Passou: 0\nâŒ Falhou: 5\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\n",
          "timestamp": "2025-12-11T17:45:12.091Z"
        },
        {
          "teste": "Teste de Todas as APIs",
          "status": "FALHOU",
          "erro": "Command failed: npm run test:apis\n",
          "output": "\n> ouvidoria-dashboard@3.0.0 test:apis\n> node scripts/test/test-all-apis.js\n\n\u001b[34mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—\u001b[0m\n\u001b[34mâ•‘  TESTE COMPLETO - APIs, KPIs e FILTROS                    â•‘\u001b[0m\n\u001b[34mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\u001b[0m\n\nBase URL: http://localhost:3000\n\n\u001b[36mâ–¶ Conectividade do servidor\u001b[0m\n\u001b[31mâœ— FAILED\u001b[0m HTTP 401\n\n\u001b[36mâ–¶ GET /api/dashboard-data - Estrutura completa\u001b[0m\n\u001b[31mâœ— FAILED\u001b[0m HTTP 401: Unauthorized\n\n\u001b[36mâ–¶ GET /api/summary - KPIs principais\u001b[0m\n\u001b[31mâœ— FAILED\u001b[0m HTTP 401: Unauthorized\n\n\u001b[36mâ–¶ POST /api/filter/aggregated - Sem filtros (estrutura vazia)\u001b[0m\n\u001b[31mâœ— FAILED\u001b[0m HTTP 401: Unauthorized\n\n\u001b[36mâ–¶ POST /api/filter/aggregated - Filtro por Status\u001b[0m\n\u001b[31mâœ— FAILED\u001b[0m NÃ£o foi possÃ­vel obter status vÃ¡lido\n\n\u001b[36mâ–¶ POST /api/filter/aggregated - Filtro por Canal\u001b[0m\n\u001b[31mâœ— FAILED\u001b[0m NÃ£o foi possÃ­vel obter canal vÃ¡lido\n\n\u001b[36mâ–¶ POST /api/filter/aggregated - MÃºltiplos filtros simultÃ¢neos\u001b[0m\n\u001b[31mâœ— FAILED\u001b[0m NÃ£o foi possÃ­vel obter dados do dashboard\n\n\u001b[36mâ–¶ POST /api/filter - Filtro bÃ¡sico de registros\u001b[0m\n\u001b[31mâœ— FAILED\u001b[0m NÃ£o foi possÃ­vel obter dados\n\n\u001b[36mâ–¶ GET /api/records - PaginaÃ§Ã£o bÃ¡sica\u001b[0m\n\u001b[31mâœ— FAILED\u001b[0m HTTP 401: Unauthorized\n\n\u001b[36mâ–¶ Performance: Comparar dashboard-data vs filter/aggregated\u001b[0m\n\u001b[31mâœ— FAILED\u001b[0m Dashboard-data falhou\n\n\u001b[34mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—\u001b[0m\n\u001b[34mâ•‘  RESUMO DOS TESTES                                         â•‘\u001b[0m\n\u001b[34mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\u001b[0m\n\nTotal de testes: 10\n\u001b[32mâœ“ Passou: 0\u001b[0m\n\u001b[31mâœ— Falhou: 10\u001b[0m\nâ±ï¸  Tempo total: 97ms\n\n\u001b[31mErros encontrados:\u001b[0m\n  â€¢ Conectividade do servidor: HTTP 401\n  â€¢ GET /api/dashboard-data - Estrutura completa: HTTP 401: Unauthorized\n  â€¢ GET /api/summary - KPIs principais: HTTP 401: Unauthorized\n  â€¢ POST /api/filter/aggregated - Sem filtros (estrutura vazia): HTTP 401: Unauthorized\n  â€¢ POST /api/filter/aggregated - Filtro por Status",
          "timestamp": "2025-12-11T17:45:13.492Z"
        },
        {
          "teste": "Teste de Endpoints e-SIC",
          "status": "PASSOU",
          "output": "\n> ouvidoria-dashboard@3.0.0 test:esic\n> node scripts/test/testEsicEndpoints.js\n\nğŸš€ Iniciando testes dos endpoints de e-SIC...\n\nğŸ“ Base URL: http://localhost:3000\n\n\nğŸ§ª Testando: Summary\n   URL: http://localhost:3000/api/esic/summary\n   âŒ Status: 401\n   âš ï¸  Erro: { success: false, message: 'AutenticaÃ§Ã£o necessÃ¡ria' }\n\nğŸ§ª Testando: Stats\n   URL: http://localhost:3000/api/esic/stats\n   âŒ Status: 401\n   âš ï¸  Erro: { success: false, message: 'AutenticaÃ§Ã£o necessÃ¡ria' }\n\nğŸ§ª Testando: Count by Status\n   URL: http://localhost:3000/api/esic/count-by?field=status\n   âŒ Status: 401\n   âš ï¸  Erro: { success: false, message: 'AutenticaÃ§Ã£o necessÃ¡ria' }\n\nğŸ§ª Testando: Count by Tipo InformaÃ§Ã£o\n   URL: http://localhost:3000/api/esic/count-by?field=tipoInformacao\n   âŒ Status: 401\n   âš ï¸  Erro: { success: false, message: 'AutenticaÃ§Ã£o necessÃ¡ria' }\n\nğŸ§ª Testando: Count by ResponsÃ¡vel\n   URL: http://localhost:3000/api/esic/count-by?field=responsavel\n   âŒ Status: 401\n   âš ï¸  Erro: { success: false, message: 'Aute",
          "timestamp": "2025-12-11T17:45:28.586Z"
        }
      ]
    },
    "kpis": {
      "total": 1,
      "passou": 0,
      "falhou": 1,
      "pulou": 0,
      "detalhes": [
        {
          "teste": "Teste de KPIs",
          "status": "FALHOU",
          "erro": "Command failed: npm run test:kpis\n",
          "output": "\n> ouvidoria-dashboard@3.0.0 test:kpis\n> node scripts/test/test-kpis.js\n\n\u001b[34mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—\u001b[0m\n\u001b[34mâ•‘  TESTE DE KPIs E MÃ‰TRICAS                                 â•‘\u001b[0m\n\u001b[34mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\u001b[0m\n\nBase URL: http://localhost:3000\n\n\u001b[36mâ–¶ Testando GET /api/dashboard-data\u001b[0m\n\u001b[31mâœ— FAILED\u001b[0m HTTP 401\n\n\u001b[36mâ–¶ Testando GET /api/summary\u001b[0m\n\u001b[31mâœ— FAILED\u001b[0m HTTP 401\n\n\u001b[36mâ–¶ Testando consistÃªncia entre endpoints\u001b[0m\n\u001b[31mâœ— FAILED\u001b[0m NÃ£o foi possÃ­vel comparar (endpoints falharam)\n\n\u001b[34mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—\u001b[0m\n\u001b[34mâ•‘  RESUMO                                                    â•‘\u001b[0m\n\u001b[34mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\u001b[0m\n\n\u001b[32mâœ“ Passou: 0\u001b[0m\n\u001b[31mâœ— Falhou: 3\u001b[0m\n\n",
          "timestamp": "2025-12-11T17:45:14.674Z"
        }
      ]
    },
    "filtros": {
      "total": 1,
      "passou": 0,
      "falhou": 1,
      "pulou": 0,
      "detalhes": [
        {
          "teste": "Teste de Filtros",
          "status": "FALHOU",
          "erro": "Command failed: npm run test:filters\n",
          "output": "\n> ouvidoria-dashboard@3.0.0 test:filters\n> node scripts/test/test-filters.js\n\n\u001b[34mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—\u001b[0m\n\u001b[34mâ•‘  TESTE DE FILTROS CROSSFILTER                            â•‘\u001b[0m\n\u001b[34mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\u001b[0m\n\nBase URL: http://localhost:3000\n\n\u001b[36mâ–¶ Obtendo valores de teste...\u001b[0m\n\u001b[31mâœ— FAILED\u001b[0m NÃ£o foi possÃ­vel obter dados do dashboard\n\n",
          "timestamp": "2025-12-11T17:45:15.897Z"
        }
      ]
    },
    "paginas": {
      "total": 2,
      "passou": 1,
      "falhou": 1,
      "pulou": 0,
      "detalhes": [
        {
          "teste": "Teste de PÃ¡ginas",
          "status": "FALHOU",
          "erro": "Command failed: npm run test:pages\n\nâŒ Erro ao executar testes: Could not find Chrome (ver. 142.0.7444.175). This can occur if either\n 1. you did not perform an installation before running the script (e.g. `npx puppeteer browsers install chrome`) or\n 2. your cache path is incorrectly configured (which is: C:\\Users\\501379\\.cache\\puppeteer).\nFor (2), check out our guide on configuring puppeteer at https://pptr.dev/guides/configuration.\n",
          "output": "\n> ouvidoria-dashboard@3.0.0 test:pages\n> node scripts/test/run-page-tests.js\n\nğŸ§ª Script de Teste de PÃ¡ginas e GrÃ¡ficos\n\nâœ… Servidor acessÃ­vel em http://localhost:3000\n\nğŸš€ Iniciando testes com Puppeteer...\n\n",
          "timestamp": "2025-12-11T17:45:21.168Z"
        },
        {
          "teste": "Teste de Todas as PÃ¡ginas",
          "status": "PASSOU",
          "output": "\n> ouvidoria-dashboard@3.0.0 test:all\n> node scripts/test/test-all-pages.js\n\n",
          "timestamp": "2025-12-11T17:45:22.007Z"
        }
      ]
    },
    "integracao": {
      "total": 3,
      "passou": 1,
      "falhou": 2,
      "pulou": 0,
      "detalhes": [
        {
          "teste": "Teste Crossfilter",
          "status": "FALHOU",
          "erro": "Command failed: npm run test:crossfilter\n",
          "output": "\n> ouvidoria-dashboard@3.0.0 test:crossfilter\n> node scripts/test/test-crossfilter.js\n\n\u001b[34m\n============================================================\u001b[0m\n\u001b[34mğŸ§ª TESTE COMPLETO DO SISTEMA CROSSFILTER\u001b[0m\n\u001b[34m============================================================\n\u001b[0m\n\u001b[36mâ„¹ï¸  \nğŸ“Š Testando filtros de Status\u001b[0m\n\u001b[36mâ„¹ï¸    Buscando valores distintos: http://localhost:3000/api/distinct?field=Status\u001b[0m\n\u001b[33mâš ï¸    API retornou status 401 para Status\u001b[0m\n\u001b[33mâš ï¸  Nenhum valor encontrado para Status\u001b[0m\n\u001b[36mâ„¹ï¸  \nğŸ“Š Testando filtros de Tema\u001b[0m\n\u001b[36mâ„¹ï¸    Buscando valores distintos: http://localhost:3000/api/distinct?field=Tema\u001b[0m\n\u001b[33mâš ï¸    API retornou status 401 para Tema\u001b[0m\n\u001b[33mâš ï¸  Nenhum valor encontrado para Tema\u001b[0m\n\u001b[36mâ„¹ï¸  \nğŸ“Š Testando filtros de Orgaos\u001b[0m\n\u001b[36mâ„¹ï¸    Buscando valores distintos: http://localhost:3000/api/distinct?field=Orgaos\u001b[0m\n\u001b[33mâš ï¸    API retornou status 401 para Orgaos\u001b[0m\n\u001b[33mâš ï¸  Nenhum valor encontrado para Orgaos\u001b[0m\n\u001b[36mâ„¹ï¸  \nğŸ“Š Testando filtros de Tipo\u001b[0m\n\u001b[36mâ„¹ï¸    Buscando valores distintos: http://localhost:3000/api/distinct?field=Tipo\u001b[0m\n\u001b[33mâš ï¸    API retornou status 401 para Tipo\u001b[0m\n\u001b[33mâš ï¸  Nenhum valor encontrado para Tipo\u001b[0m\n\u001b[36mâ„¹ï¸  \nğŸ“Š Testando filtros de Canal\u001b[0m\n\u001b[36mâ„¹ï¸    Buscando valores distintos: http://localhost:3000/api/distinct?field=Canal\u001b[0m\n\u001b[33mâš ï¸    API retornou status 401 para Canal\u001b[0m\n\u001b[33mâš ï¸  Nenhum valor encontrado para Canal\u001b[0m\n\u001b[36mâ„¹ï¸  \nğŸ“Š Testando filtros de Prioridade\u001b[0m\n\u001b[36mâ„¹ï¸    Buscando valores distintos: http://localhost:3000/api/distinct?field=Prioridade\u001b[0m\n\u001b[33mâš ï¸    API retornou status 401 para Prioridade\u001b[0m\n\u001b[33mâš ï¸  Nenhum valor encontrado para Prioridade\u001b[0m\n\u001b[36mâ„¹ï¸  \nğŸ“Š Testando filtros de UnidadeCadastro\u001b[0m\n\u001b[36mâ„¹ï¸    Buscando valores distintos: http://localhost:3000/api/distinct?field=UnidadeCadastro\u001b[0m\n\u001b[33mâš ï¸    API retornou status 401 para UnidadeCadastro\u001b[0m\n\u001b[33mâš ï¸  Nenhum valor encontrado para UnidadeCadastro\u001b[0m\n\u001b[36mâ„¹ï¸  \nğŸ“Š Testando combinaÃ§Ãµes de filtros",
          "timestamp": "2025-12-11T17:45:17.226Z"
        },
        {
          "teste": "Teste Estrutura Crossfilter",
          "status": "PASSOU",
          "output": "\n> ouvidoria-dashboard@3.0.0 test:crossfilter:structure\n> node scripts/test/test-crossfilter-structure.js\n\n\u001b[34m\n============================================================\u001b[0m\n\u001b[34mğŸ§ª TESTE DE ESTRUTURA DO SISTEMA CROSSFILTER\u001b[0m\n\u001b[34m============================================================\n\u001b[0m\n\u001b[36mâ„¹ï¸  \nğŸ“ Teste 1: Verificando arquivos principais\u001b[0m\n\u001b[32mâœ… MÃ³dulo crossfilter-overview: public/scripts/core/crossfilter-overview.js\u001b[0m\n\u001b[32mâœ… PÃ¡gina overview: public/scripts/pages/ouvidoria/overview.js\u001b[0m\n\u001b[32mâœ… Script de teste browser: public/scripts/test/test-crossfilter-browser.js\u001b[0m\n\u001b[32mâœ… Script de teste Node.js: scripts/test/test-crossfilter.js\u001b[0m\n\u001b[36mâ„¹ï¸  \nğŸ”§ Teste 2: Verificando funÃ§Ãµes principais\u001b[0m\n\u001b[32mâœ… Objeto crossfilterOverview: Encontrado \"crossfilterOverview\"\u001b[0m\n\u001b[32mâœ… FunÃ§Ã£o setAllData: Encontrado \"setAllData(\"\u001b[0m\n\u001b[32mâœ… FunÃ§Ã£o getFilteredData: Encontrado \"getFilteredData(\"\u001b[0m\n\u001b[32mâœ… FunÃ§Ã£o toggleFilter: Encontrado \"toggleFilter(\"\u001b[0m\n\u001b[32mâœ… FunÃ§Ã£o clearAllF",
          "timestamp": "2025-12-11T17:45:18.101Z"
        },
        {
          "teste": "Teste de AgregaÃ§Ãµes",
          "status": "FALHOU",
          "erro": "Command failed: npm run test:aggregation\nâŒ Erro no teste: Error: API retornou status 401\n    at testAggregation (file:///C:/Users/501379/Desktop/DRIVE/Dashboard/NOVO/scripts/test/test-aggregation-auto.js:31:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n",
          "output": "\n> ouvidoria-dashboard@3.0.0 test:aggregation\n> node scripts/test/test-aggregation-auto.js\n\nğŸ§ª Iniciando teste automatizado de agregaÃ§Ã£o...\n\n1ï¸âƒ£ Buscando dados filtrados da API...\n",
          "timestamp": "2025-12-11T17:45:19.083Z"
        }
      ]
    },
    "dados": {
      "total": 5,
      "passou": 4,
      "falhou": 0,
      "pulou": 1,
      "detalhes": [
        {
          "teste": "Verificar Todos os Protocolos",
          "status": "PASSOU",
          "output": "ğŸ” Verificando TODOS os Protocolos com Tempo > 60 dias\n\n================================================================================\nâœ… Conectado ao MongoDB Atlas\n\nğŸ“Š Buscando todos os protocolos...\nTotal de protocolos no banco: 17563\n\nâš ï¸  Protocolos com tempo > 60 dias: 1453\n\nğŸ“‹ Top 30 Protocolos com maior tempo:\n\n   1. Protocolo: PRT-C3665DE7BCE2B1FF\n      MÃªs: 2025-01\n      CriaÃ§Ã£o: 2025-01-11\n      ConclusÃ£o: 2025-11-01\n      Tempo Calculado: 295 dias\n      Tempo Campo: N/A\n      Tempo Final: 295 dias\n      Campo tempoDeResolucaoEmDias: N/A\n\n   2. Protocolo: PRT-7775A55ECD97A715\n      MÃªs: 2025-02\n      CriaÃ§Ã£o: 2025-02-12\n      ConclusÃ£o: 2025-12-02\n      Tempo Calculado: 294 dias\n      Tempo Campo: N/A\n      Tempo Final: 294 dias\n      Campo tempoDeResolucaoEmDias: N/A\n\n   3. Protocolo: PRT-8AF1D412279A5E6D\n      MÃªs: 2025-02\n      CriaÃ§Ã£o: 2025-02-12\n      ConclusÃ£o: 2025-12-02\n      Tempo Calculado: 294 dias\n      Tempo Campo: N/A\n      Tempo Final: 294 dias\n      Campo temp",
          "timestamp": "2025-12-11T17:45:35.936Z"
        },
        {
          "teste": "Verificar Datas Inconsistentes",
          "status": "PASSOU",
          "output": "ğŸ” Verificando Datas Inconsistentes\n\n================================================================================\nâœ… Conectado ao MongoDB Atlas\n\nTotal de protocolos no banco: 17563\n\nProtocolos com datas inconsistentes (> 200 dias ou conclusÃ£o futura): 249\n\nğŸ“‹ Top 30 Protocolos com Datas Inconsistentes:\n\n   1. Protocolo: PRT-C3665DE7BCE2B1FF\n      MÃªs: 2025-01\n      CriaÃ§Ã£o: 2025-01-11\n      ConclusÃ£o: 2025-11-01 \n      Tempo calculado: 295 dias\n      Campo tempoDeResolucaoEmDias: N/A\n\n   2. Protocolo: PRT-7775A55ECD97A715\n      MÃªs: 2025-02\n      CriaÃ§Ã£o: 2025-02-12\n      ConclusÃ£o: 2025-12-02 \n      Tempo calculado: 294 dias\n      Campo tempoDeResolucaoEmDias: N/A\n\n   3. Protocolo: PRT-8AF1D412279A5E6D\n      MÃªs: 2025-02\n      CriaÃ§Ã£o: 2025-02-12\n      ConclusÃ£o: 2025-12-02 \n      Tempo calculado: 294 dias\n      Campo tempoDeResolucaoEmDias: N/A\n\n   4. Protocolo: PRT-8AF1D412279A5E6D-2\n      MÃªs: 2025-02\n      CriaÃ§Ã£o: 2025-02-12\n      ConclusÃ£o: 2025-12-02 \n      Tempo calculado: ",
          "timestamp": "2025-12-11T17:45:44.442Z"
        },
        {
          "teste": "Verificar Tempo de ConclusÃ£o",
          "status": "PASSOU",
          "output": "ğŸ” Verificando Tempo de ConclusÃ£o - Jan-Mai 2025\n\n================================================================================\nâœ… Conectado ao MongoDB Atlas\n\nTotal de protocolos encontrados: 6515\n\nProtocolos com tempo calculado: 6411\n\nğŸ“Š EstatÃ­sticas de Tempo de ConclusÃ£o:\n   MÃ­nimo: 1 dias\n   MÃ¡ximo: 295 dias\n   MÃ©dia: 18.4 dias\n\nâš ï¸  Protocolos com mais de 60 dias: 645\n\nğŸ“‹ Primeiros 20 protocolos acima de 60 dias:\n   1. Protocolo: PRT-C3665DE7BCE2B1FF\n      CriaÃ§Ã£o: 2025-01-11\n      ConclusÃ£o: 2025-11-01\n      Tempo: 295 dias\n      Campo tempoDeResolucaoEmDias: N/A\n\n   2. Protocolo: PRT-7775A55ECD97A715\n      CriaÃ§Ã£o: 2025-02-12\n      ConclusÃ£o: 2025-12-02\n      Tempo: 294 dias\n      Campo tempoDeResolucaoEmDias: N/A\n\n   3. Protocolo: PRT-8AF1D412279A5E6D\n      CriaÃ§Ã£o: 2025-02-12\n      ConclusÃ£o: 2025-12-02\n      Tempo: 294 dias\n      Campo tempoDeResolucaoEmDias: N/A\n\n   4. Protocolo: PRT-8AF1D412279A5E6D-2\n      CriaÃ§Ã£o: 2025-02-12\n      ConclusÃ£o: 2025-12-02\n      Tempo: 294 di",
          "timestamp": "2025-12-11T17:45:51.121Z"
        },
        {
          "teste": "Verificar Duplicatas",
          "status": "PASSOU",
          "output": "14:45:59 [\u001b[32mdebug\u001b[39m]: Logger inicializado {\n  \"environment\": \"development\"\n}\r\nğŸ” Verificando duplicatas e inconsistÃªncias...\n\n14:46:01 [\u001b[32minfo\u001b[39m]: âœ… Mongoose conectado ao MongoDB Atlas com sucesso\r\nâœ… Conectado ao banco de dados\n\nğŸ“Š ESTATÃSTICAS DO BANCO:\n   - Total de registros: 17563\n   - Com protocolo: 17563\n   - Sem protocolo: 0\n\nğŸ” DUPLICATAS NO BANCO:\n   âš ï¸  154 protocolos duplicados encontrados:\n      - Protocolo C953950641155785425: 2 ocorrÃªncias\n      - Protocolo C255389145873820525: 2 ocorrÃªncias\n      - Protocolo C078305824848741625: 2 ocorrÃªncias\n      - Protocolo C909530705992914025: 2 ocorrÃªncias\n      - Protocolo C972972387303699025: 2 ocorrÃªncias\n      - Protocolo C473282549642386725: 2 ocorrÃªncias\n      - Protocolo C369381615125184925: 2 ocorrÃªncias\n      - Protocolo C693073066683462225: 2 ocorrÃªncias\n      - Protocolo C728079863048079625: 2 ocorrÃªncias\n      - Protocolo C724062531491725225: 2 ocorrÃªncias\n      ... e mais 144 protocolos duplicados\n\nğŸ“¥ Lendo ",
          "timestamp": "2025-12-11T17:46:04.253Z"
        },
        {
          "teste": "Validar Unidades de SaÃºde",
          "status": "PULOU",
          "erro": "Command failed: node scripts/maintenance/validateUnidadesSaude.js\n\nâŒ Erro durante validaÃ§Ã£o: Error: âŒ Arquivo nÃ£o encontrado: C:\\Users\\501379\\Desktop\\DRIVE\\Dashboard\\NOVO\\scripts\\data\\unidades-saude.json\n    at loadUnidadesSaude (file:///C:/Users/501379/Desktop/DRIVE/Dashboard/NOVO/scripts/maintenance/validateUnidadesSaude.js:25:11)\n    at main (file:///C:/Users/501379/Desktop/DRIVE/Dashboard/NOVO/scripts/maintenance/validateUnidadesSaude.js:144:18)\n    at file:///C:/Users/501379/Desktop/DRIVE/Dashboard/NOVO/scripts/maintenance/validateUnidadesSaude.js:272:1\n    at ModuleJob.run (node:internal/modules/esm/module_job:343:25)\n    at async onImport.tracePromise.__proto__ (node:internal/modules/esm/loader:665:26)\n    at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:117:5)\nStack: Error: âŒ Arquivo nÃ£o encontrado: C:\\Users\\501379\\Desktop\\DRIVE\\Dashboard\\NOVO\\scripts\\data\\unidades-saude.json\n    at loadUnidadesSaude (file:///C:/Users/501379/Desktop/DRIVE/Dashboard/NOVO/scripts/maintenance/validateUnidadesSaude.js:25:11)\n    at main (file:///C:/Users/501379/Desktop/DRIVE/Dashboard/NOVO/scripts/maintenance/validateUnidadesSaude.js:144:18)\n    at file:///C:/Users/501379/Desktop/DRIVE/Dashboard/NOVO/scripts/maintenance/validateUnidadesSaude.js:272:1\n    at ModuleJob.run (node:internal/modules/esm/module_job:343:25)\n    at async onImport.tracePromise.__proto__ (node:internal/modules/esm/loader:665:26)\n    at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:117:5)\n",
          "output": "ğŸ¥ Validando Unidades de SaÃºde...\n\nğŸ“‚ Carregando arquivo de unidades de saÃºde...\n",
          "timestamp": "2025-12-11T17:46:04.479Z"
        }
      ]
    },
    "manutencao": {
      "total": 3,
      "passou": 1,
      "falhou": 0,
      "pulou": 2,
      "detalhes": [
        {
          "teste": "InformaÃ§Ãµes do Banco de Dados",
          "status": "PASSOU",
          "output": "ğŸ” Conectando ao banco de dados...\n\nâœ… Conectado com sucesso!\n\n================================================================================\nğŸ“Š INFORMAÃ‡Ã•ES DO BANCO DE DADOS\n================================================================================\n\nğŸ“‹ MODELO: Record (Registros da Ouvidoria)\n--------------------------------------------------------------------------------\nTotal de registros: 17.563\n\nğŸ“ˆ EstatÃ­sticas por Campo:\n\n  Status:\n    - Demanda encerrada (arquivamento) - SaÃºde: 6.449\n    - Demanda encerrada (arquivamento) - OG: 3.878\n    - Ouvidoria setorial da SaÃºde: 2.191\n    - Departamento de AtenÃ§Ã£o Ã  SaÃºde (DAS): 1.614\n    - Departamento de RegulaÃ§Ã£o: 696\n    - Respondidas pelos Departamentos para Setorial da SaÃºde: 434\n    - Ouvidoria Setorial de Meio Ambiente: 185\n    - Departamento de Enfermagem: 171\n    - Departamento de fiscalizaÃ§Ã£o - Meio Ambiente: 147\n    - Setor de Limpeza Urbana: 119\n\n  Tema (Top 10):\n    - SaÃºde: 12.509\n    - ComunicaÃ§Ã£o Social: 1.479\n    - ",
          "timestamp": "2025-12-11T17:46:13.200Z"
        },
        {
          "teste": "Verificar Zeladoria",
          "status": "PULOU",
          "erro": "Command failed: node scripts/maintenance/checkZeladoria.js\nâŒ ERRO: Modelo Zeladoria nÃ£o encontrado no Prisma Client!\nğŸ’¡ Execute: npm run prisma:generate para regenerar o cliente\n\n",
          "output": "ğŸ” Verificando dados de Zeladoria no banco...\n\nâœ… Conectado ao banco de dados\n\nğŸ“Š Total de registros: 20.203\n\nğŸ“Š Por Status:\n   FECHADO: 15.938\n   ABERTO: 1.547\n   INDEFERIDO: 1.192\n   ATENDIMENTO: 842\n   RECUSADO: 580\n   NOVO: 82\n   ATENDIDO: 22\n\nprisma:error \nInvalid `prisma.zeladoria.groupBy()` invocation:\n\n\nInput error. Every field used for orderBy must be included in the by-arguments of the query. Missing fields: id\n",
          "timestamp": "2025-12-11T17:46:13.919Z"
        },
        {
          "teste": "Verificar Protocolos com Prazo > 200 dias",
          "status": "PULOU",
          "erro": "Command failed: node scripts/maintenance/checkPrazoMais200.js\nnode:internal/modules/esm/resolve:274\r\n    throw new ERR_MODULE_NOT_FOUND(\r\n          ^\r\n\r\nError [ERR_MODULE_NOT_FOUND]: Cannot find module 'C:\\Users\\501379\\Desktop\\DRIVE\\Dashboard\\NOVO\\scripts\\src\\utils\\dateUtils.js' imported from C:\\Users\\501379\\Desktop\\DRIVE\\Dashboard\\NOVO\\scripts\\maintenance\\checkPrazoMais200.js\r\n    at finalizeResolution (node:internal/modules/esm/resolve:274:11)\r\n    at moduleResolve (node:internal/modules/esm/resolve:859:10)\r\n    at defaultResolve (node:internal/modules/esm/resolve:983:11)\r\n    at #cachedDefaultResolve (node:internal/modules/esm/loader:731:20)\r\n    at ModuleLoader.resolve (node:internal/modules/esm/loader:708:38)\r\n    at ModuleLoader.getModuleJobForImport (node:internal/modules/esm/loader:310:38)\r\n    at ModuleJob._link (node:internal/modules/esm/module_job:182:49) {\r\n  code: 'ERR_MODULE_NOT_FOUND',\r\n  url: 'file:///C:/Users/501379/Desktop/DRIVE/Dashboard/NOVO/scripts/src/utils/dateUtils.js'\r\n}\r\n\r\nNode.js v22.21.0\r\n",
          "output": "node:internal/modules/esm/resolve:274\r\n    throw new ERR_MODULE_NOT_FOUND(\r\n          ^\r\n\r\nError [ERR_MODULE_NOT_FOUND]: Cannot find module 'C:\\Users\\501379\\Desktop\\DRIVE\\Dashboard\\NOVO\\scripts\\src\\utils\\dateUtils.js' imported from C:\\Users\\501379\\Desktop\\DRIVE\\Dashboard\\NOVO\\scripts\\maintenance\\checkPrazoMais200.js\r\n    at finalizeResolution (node:internal/modules/esm/resolve:274:11)\r\n    at moduleResolve (node:internal/modules/esm/resolve:859:10)\r\n    at defaultResolve (node:internal/modules/esm/resolve:983:11)\r\n    at #cachedDefaultResolve (node:internal/modules/esm/loader:731:20)\r\n    at ModuleLoader.resolve (node:internal/modules/esm/loader:708:38)\r\n    at ModuleLoader.getModuleJobForImport (node:internal/modules/esm/loader:310:38)\r\n    at ModuleJob._link (node:internal/modules/esm/module_job:182:49) {\r\n  code: 'ERR_MODULE_NOT_FOUND',\r\n  url: 'file:///C:/Users/501379/Desktop/DRIVE/Dashboard/NOVO/scripts/src/utils/dateUtils.js'\r\n}\r\n\r\nNode.js v22.21.0\r\n",
          "timestamp": "2025-12-11T17:46:14.143Z"
        }
      ]
    },
    "conexoes": {
      "total": 3,
      "passou": 1,
      "falhou": 0,
      "pulou": 2,
      "detalhes": [
        {
          "teste": "Teste de ConexÃ£o MongoDB",
          "status": "PASSOU",
          "output": "14:45:00 [\u001b[32mdebug\u001b[39m]: Logger inicializado {\n  \"environment\": \"development\"\n}\r\nğŸ§ª TESTE DE CONEXÃƒO MONGOOSE\n\n============================================================\n\n1ï¸âƒ£ Testando conexÃ£o...\n14:45:01 [\u001b[32minfo\u001b[39m]: âœ… Mongoose conectado ao MongoDB Atlas com sucesso\r\nâœ… Mongoose conectado com sucesso!\n\n2ï¸âƒ£ Status da conexÃ£o:\n{\n  \"state\": \"connected\",\n  \"readyState\": 1,\n  \"host\": \"ac-fqrlqyy-shard-00-00.gk8g0dq.mongodb.net\",\n  \"port\": 27017,\n  \"name\": \"ouvidoria\"\n}\n\n3ï¸âƒ£ Testando models...\nâœ… Record: 17563 documentos\nâœ… Zeladoria: 20203 documentos\nâœ… ChatMessage: 160 documentos\nâœ… AggregationCache: 54 documentos\nâœ… NotificacaoEmail: 769 documentos\nâœ… SecretariaInfo: 20 documentos\nâœ… User: 7 documentos\n\n4ï¸âƒ£ Testando query simples...\nâœ… Query Record funcionando!\n   Protocolo: 00719.2024.000659-46\n   Status: Demanda encerrada (arquivamento) - OG\n\n5ï¸âƒ£ Verificando Ã­ndices...\nâœ… Record tem 27 Ã­ndices\n   Ãndices: _id_, records_protocolo_idx, records_statusDemanda_idx, records_tipoDeManifestacao",
          "timestamp": "2025-12-11T17:45:02.234Z"
        },
        {
          "teste": "Teste de Google Sheets",
          "status": "PULOU",
          "erro": "Command failed: node scripts/test/testGoogleSheets.js\n\nâŒâŒâŒ ERRO NO TESTE âŒâŒâŒ\n\nâŒ Erro de credenciais!\n   - Verifique se o arquivo de credenciais existe\n   - Verifique se o GOOGLE_CREDENTIALS_FILE estÃ¡ correto no .env\n\nğŸ’¡ Dicas:\n   1. Verifique se todas as variÃ¡veis estÃ£o no .env\n   2. Verifique se a planilha foi compartilhada com o Service Account\n   3. Verifique se a Google Sheets API estÃ¡ habilitada\n   4. Consulte GOOGLE_SHEETS_SETUP.md para mais detalhes\n\n",
          "output": "ğŸ§ª Testando conexÃ£o com Google Sheets...\n\nğŸ“‹ Verificando configuraÃ§Ãµes...\nâœ… GOOGLE_SHEET_ID: 1aF0I8pxABXhqyO2DmzBV9aoWHQN2h7LpTN-qdkGLc_g\n\nğŸ” Autenticando...\n",
          "timestamp": "2025-12-11T17:45:06.189Z"
        },
        {
          "teste": "Teste de Chaves Gemini",
          "status": "PULOU",
          "erro": "Command failed: node scripts/test/testGeminiKeys.js\n",
          "output": "ğŸ§ª Teste de Chaves da API Gemini\n\n============================================================\n\nğŸ“Š Total de chaves encontradas: 4\n\n\nğŸ”‘ Testando Chave 1/4...\n   Prefixo: AIzaSyDfOLsRs4J...\n   Tamanho: 39 caracteres\n   âŒ ERRO 403 (382ms)\n   ğŸ“ Mensagem: Your API key was reported as leaked. Please use another API key.\n   âš ï¸  PermissÃ£o negada - verifique se a API estÃ¡ habilitada\n\nğŸ”‘ Testando Chave 2/4...\n   Prefixo: AIzaSyBwahD5BNc...\n   Tamanho: 39 caracteres\n   âŒ ERRO 403 (189ms)\n   ğŸ“ Mensagem: Your API key was reported as leaked. Please use another API key.\n   âš ï¸  PermissÃ£o negada - verifique se a API estÃ¡ habilitada\n\nğŸ”‘ Testando Chave 3/4...\n   Prefixo: AIzaSyC3BGErwH-...\n   Tamanho: 39 caracteres\n   âŒ ERRO 403 (188ms)\n   ğŸ“ Mensagem: Your API key was reported as leaked. Please use another API key.\n   âš ï¸  PermissÃ£o negada - verifique se a API estÃ¡ habilitada\n\nğŸ”‘ Testando Chave 4/4...\n   Prefixo: AIzaSyDNpqk0rkU...\n   Tamanho: 39 caracteres\n   âŒ ERRO 403 (199ms)\n   ğŸ“ Mensagem: Your API key was reported as leaked. Please use another API key.\n   âš ï¸  PermissÃ£o negada - verifique se a API estÃ¡ habilitada\n\n============================================================\n\nğŸ“Š RESUMO DOS TESTES\n\nâœ… Chaves funcionando: 0\nâŒ Chaves com erro: 4\nâš ï¸  Chaves com exceÃ§Ã£o: 0\n\nâŒ CHAVES COM ERRO:\n   Chave 1: AIzaSyDfOLsRs4J... - 403 - Your API key was reported as leaked. Please use another API key.\n   Chave 2: AIzaSyBwahD5BNc... - 403 - Your API key was reported as leaked. Please use another API key.\n   Chave 3: AIzaSyC3BGErwH-... - 403 - Your API key was reported as leaked. Please use another API key.\n   Chave 4: AIzaSyDNpqk0rkU... - 403 - Your API key was reported as leaked. Please use another API key.\n\n============================================================\n\nâš ï¸  NENHUMA CHAVE ESTÃ FUNCIONANDO!\n\nğŸ’¡ Verifique:\n   1. Se as chaves estÃ£o corretas no arquivo .env\n   2. Se a API Gemini estÃ¡ habilitada no Google Cloud\n   3. Se as quotas nÃ£o foram excedidas\n   4. Se as chaves tÃªm permissÃµe",
          "timestamp": "2025-12-11T17:45:10.338Z"
        }
      ]
    },
    "emails": {
      "total": 3,
      "passou": 3,
      "falhou": 0,
      "pulou": 0,
      "detalhes": [
        {
          "teste": "Verificar Emails Enviados",
          "status": "PASSOU",
          "output": "ğŸ“§ Verificando configuraÃ§Ã£o de emails...\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nğŸ“‹ MAPEAMENTO DE SECRETARIAS:\n\nSecretarias com email especÃ­fico:\n   - FUNDEC â€“ FundaÃ§Ã£o de Apoio Ã  Escola TÃ©cnica, Tecnologia, Esporte, Lazer, Cultura e PolÃ­ticas Sociais de Duque de Caxias: educacao@fundec.rj.gov.br\n   - IPMDC â€“ Instituto de PrevidÃªncia dos Servidores PÃºblicos do MunicÃ­pio de Duque de Caxias: faleconosco@ipmdc.com.br\n   - Ouvidoria Geral do MunicÃ­pio: ouvidoria@duquedecaxias.rj.gov.br\n   - Procuradoria-Geral do MunicÃ­pio (PGM): gabineteadm.pgmdc@gmail.com\n   - Secretaria Municipal de AdministraÃ§Ã£o, Planejamento e OrÃ§amento: sma@duquedecaxias.rj.gov.br\n   - Secretaria Municipal de AssistÃªncia Social e Direitos Humanos: ouvidoria.smasdh@duquedecaxias.rj.gov.br\n   - Secretaria Municipal de ComunicaÃ§Ã£o Social e RelaÃ§Ãµes PÃºblicas: imprensa@duquedecaxias.rj.gov.br\n   - Secretaria Municipal de EducaÃ§Ã£o: ouvidoriasme@smeduquedecaxias.rj.gov.br\n   - Secretaria Municipal de Es",
          "timestamp": "2025-12-11T17:46:06.620Z"
        },
        {
          "teste": "Verificar NotificaÃ§Ãµes de Email",
          "status": "PASSOU",
          "output": "ğŸ” Verificando emails das secretarias na pÃ¡gina de notificaÃ§Ãµes...\n\nâœ… Conectado ao MongoDB\n\nğŸ“Š Total de secretarias no banco com email: 20\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nğŸ“‹ COMPARAÃ‡ÃƒO DE EMAILS:\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nğŸ“Š RESUMO DA VERIFICAÃ‡ÃƒO:\n\n   Total verificadas: 21\n   âœ… Corretas: 13\n   âŒ Incorretas: 7\n   âš ï¸  Sem email (usando padrÃ£o): 1\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nâš ï¸  PROBLEMAS ENCONTRADOS:\n\n1. Ouvidoria Geral do MunicÃ­pio\n   Problema: Sem email cadastrado (usando padrÃ£o)\n   Email atual: ouvidoria@duquedecaxias.rj.gov.br\n\n2. Secretaria Municipal de GestÃ£o e InclusÃ£o e Mulher\n   Problema: Email nÃ£o corresponde\n   Email esperado: smddti@duquedecaxias.rj.gov.br;secretariadamulherduquedecaxias@gmail.com (BANCO)\n   Email atual: smddti@duquedecaxias.rj.gov.br\n\n3. Secretaria Municipal de Fazenda\n   Problema: Email nÃ£o corresponde\n   Email esperado: anistiafiscal@duquedecaxias.rj.gov.br;",
          "timestamp": "2025-12-11T17:46:10.482Z"
        },
        {
          "teste": "Verificar CÃ¡lculo de Vencimentos",
          "status": "PASSOU",
          "output": "ğŸ” Verificando cÃ¡lculo de vencimentos\n\nğŸ“… Data de hoje: 2025-12-11 (11/12/2025)\n\nğŸ“Š Analisando 5000 registros...\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nğŸ“Š PROTOCOLOS POR CATEGORIA:\n\n   ğŸš¨ Vencendo HOJE (0 dias): 0\n   âš ï¸  Vencendo AMANHÃƒ (1 dia): 0\n   ğŸ“… Vencendo em 2-7 dias: 0\n   ğŸ“† Vencendo em 8-15 dias: 0\n   âŒ JÃ¡ vencidos: 309\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nğŸ“‹ EXEMPLOS DE CÃLCULO (primeiros 10):\n\n   1. Protocolo: C002911465104032225\n      Secretaria: Secretaria de SaÃºde\n      Data CriaÃ§Ã£o: 2025-10-03\n      Tipo: ReclamaÃ§Ã£o\n      Prazo: 30 dias\n      Data Vencimento Calculada: 2025-11-02\n      Dias Restantes: -39 (VENCIDO)\n\n   2. Protocolo: C009399328909116025\n      Secretaria: Secretaria de Obras e Agricultura\n      Data CriaÃ§Ã£o: 2025-06-04\n      Tipo: ReclamaÃ§Ã£o\n      Prazo: 30 dias\n      Data Vencimento Calculada: 2025-07-04\n      Dias Restantes: -160 (VENCIDO)\n\n   3. Protocolo: C011414258553886525\n      Secretaria: Secretaria d",
          "timestamp": "2025-12-11T17:46:11.962Z"
        }
      ]
    }
  }
}