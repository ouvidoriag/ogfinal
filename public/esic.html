<!doctype html>
<html lang="pt-br">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>e-SIC - Duque de Caxias - Dashboard</title>
  <link rel="icon" type="image/png" href="/dc-logo.png" />
  <!-- Tailwind CSS: Sempre tentar usar local primeiro, CDN como fallback -->
  <script>
    (function () {
      // Suprimir aviso do Tailwind CDN ANTES de qualquer coisa
      const originalWarn = console.warn;
      console.warn = function (...args) {
        if (args[0] && typeof args[0] === 'string' &&
          (args[0].includes('cdn.tailwindcss.com') ||
            args[0].includes('should not be used in production'))) {
          return;
        }
        originalWarn.apply(console, args);
      };

      const tailwindCSS = document.createElement('link');
      tailwindCSS.rel = 'stylesheet';
      tailwindCSS.href = '/styles/tailwind.min.css';

      tailwindCSS.onerror = function () {
        const isDevelopment = window.location.hostname === 'localhost' ||
          window.location.hostname === '127.0.0.1' ||
          window.location.hostname.includes('localhost');

        if (isDevelopment) {
          const tailwindScript = document.createElement('script');
          tailwindScript.src = 'https://cdn.tailwindcss.com';
          tailwindScript.onload = function () {
            if (window.tailwind) {
              window.tailwind.config = window.tailwind.config || {};
              window.tailwind.config.silent = true;
            }
          };
          document.head.appendChild(tailwindScript);
        }
      };

      document.head.appendChild(tailwindCSS);
    })();
  </script>
  <!-- Animate.css local (resolve Tracking Prevention) -->
  <link rel="stylesheet" href="/styles/animate.min.css" />
  <!-- Google Fonts - Rajdhani (mesma fonte do painel de login) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #0b1020;
      --panel: #0f172a;
      --muted: #94a3b8;
      --primary: #22d3ee;
      --accent: #a78bfa;
      --success: #34d399;
      --danger: #fb7185;
    }

    /* Aplicar fonte Rajdhani globalmente */
    * {
      font-family: 'Rajdhani', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    }

    body {
      font-family: 'Rajdhani', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: radial-gradient(1200px 600px at top left, rgba(34, 211, 238, 0.08), transparent 60%),
        radial-gradient(1200px 600px at bottom right, rgba(167, 139, 250, 0.08), transparent 60%),
        var(--bg);
    }

    /* Garantir que inputs, buttons, selects e textareas tambÃ©m usem Rajdhani */
    input,
    button,
    select,
    textarea,
    label,
    span,
    div,
    p,
    h1,
    h2,
    h3,
    h4,
    h5,
    h6,
    a,
    li,
    td,
    th {
      font-family: 'Rajdhani', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    }

    .glass {
      background: linear-gradient(180deg, rgba(255, 255, 255, 0.04), rgba(255, 255, 255, 0.02));
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.35), inset 0 1px 0 rgba(255, 255, 255, 0.08);
      border: 1px solid rgba(255, 255, 255, 0.08);
    }

    .neon {
      text-shadow: 0 0 12px rgba(34, 211, 238, 0.65), 0 0 24px rgba(167, 139, 250, 0.45);
    }

    .glow-ring {
      box-shadow: 0 0 0 2px rgba(34, 211, 238, 0.15), 0 0 32px rgba(34, 211, 238, 0.25);
    }

    nav div[data-page].active {
      background: linear-gradient(90deg, rgba(34, 211, 238, 0.15) 0%, rgba(34, 211, 238, 0.05) 100%);
      border-left: 3px solid #22d3ee;
      color: #22d3ee;
      font-weight: 600;
    }

    nav div[data-page]:hover:not(.active) {
      background: rgba(255, 255, 255, 0.05);
    }

    :where(.overflow-y-auto, .overflow-auto, .overflow-y-scroll)::-webkit-scrollbar {
      width: 12px;
      height: 12px;
    }

    :where(.overflow-y-auto, .overflow-auto, .overflow-y-scroll)::-webkit-scrollbar-track {
      background: transparent;
    }

    :where(.overflow-y-auto, .overflow-auto, .overflow-y-scroll)::-webkit-scrollbar-thumb {
      background: linear-gradient(180deg, #0a0a0a, #1a1a1a);
      border-radius: 10px;
      border: 2px solid transparent;
      background-clip: padding-box;
    }

    :where(.overflow-y-auto, .overflow-auto, .overflow-y-scroll)::-webkit-scrollbar-thumb:hover {
      background: linear-gradient(180deg, #111, #222);
    }
  </style>
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js')
          .then(reg => {
            if (window.Logger) {
              window.Logger.success('Service Worker registrado:', reg.scope);
            } else {
              console.log('âœ… Service Worker registrado:', reg.scope);
            }
          })
          .catch(err => {
            if (window.Logger) {
              window.Logger.warn('Service Worker nÃ£o registrado:', err);
            }
          });
      });
    }
  </script>
</head>

<body class="text-slate-100">
  <div class="min-h-screen grid grid-cols-12 gap-6 p-6">
    <aside class="col-span-12 lg:col-span-3 xl:col-span-2 glass rounded-2xl p-5">
      <div class="mb-6">
        <div class="flex items-center gap-3 mb-4">
          <img src="/dc-logo.png" alt="Duque de Caxias" class="h-12 w-auto object-contain" />
          <div>
            <div class="text-lg font-semibold">e-SIC</div>
            <div class="text-xs text-slate-400">Sistema EletrÃ´nico de InformaÃ§Ãµes ao CidadÃ£o</div>
          </div>
        </div>
      </div>

      <nav class="space-y-3 text-sm">
        <div class="space-y-1">
          <div class="text-xs font-semibold text-slate-400 uppercase tracking-wider px-3 mb-2">ğŸ  InÃ­cio</div>
          <div data-page="home" class="active px-3 py-2 rounded-lg hover:bg-white/5 cursor-pointer transition-colors">ğŸ 
            Home</div>
          <div data-page="overview" class="px-3 py-2 rounded-lg hover:bg-white/5 cursor-pointer transition-colors">ğŸ“Š
            VisÃ£o Geral</div>
        </div>
        <div class="space-y-1">
          <div class="text-xs font-semibold text-slate-400 uppercase tracking-wider px-3 mb-2">ğŸ“‹ AnÃ¡lises</div>
          <div data-page="status" class="px-3 py-2 rounded-lg hover:bg-white/5 cursor-pointer transition-colors">ğŸ“ˆ Por
            Status</div>
          <div data-page="tipo-informacao"
            class="px-3 py-2 rounded-lg hover:bg-white/5 cursor-pointer transition-colors">ğŸ“‘ Tipo de InformaÃ§Ã£o</div>
          <div data-page="responsavel" class="px-3 py-2 rounded-lg hover:bg-white/5 cursor-pointer transition-colors">ğŸ‘¤
            ResponsÃ¡vel</div>
          <div data-page="unidade" class="px-3 py-2 rounded-lg hover:bg-white/5 cursor-pointer transition-colors">ğŸ¢
            Unidade</div>
          <div data-page="canal" class="px-3 py-2 rounded-lg hover:bg-white/5 cursor-pointer transition-colors">ğŸ“ Canal
          </div>
          <div data-page="mensal" class="px-3 py-2 rounded-lg hover:bg-white/5 cursor-pointer transition-colors">ğŸ“…
            AnÃ¡lise Mensal</div>
        </div>
      </nav>
    </aside>

    <main id="pages" class="col-span-12 lg:col-span-9 xl:col-span-10 space-y-6">
      <div id="pageTitle" class="mb-4"></div>

      <section id="page-home" class="">
        <div class="glass rounded-2xl p-8 md:p-12 text-center">
          <div class="mb-8">
            <div class="inline-block relative">
              <h1 class="neon text-4xl md:text-5xl font-bold mb-4">ğŸ“‹ e-SIC</h1>
              <div class="text-slate-400 text-lg">Sistema EletrÃ´nico de InformaÃ§Ãµes ao CidadÃ£o</div>
            </div>
          </div>
          <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-8">
            <div class="glass rounded-xl p-6 hover:bg-white/5 transition-colors cursor-pointer"
              onclick="loadSection('overview')">
              <div class="text-3xl mb-2">ğŸ“Š</div>
              <div class="font-semibold text-cyan-300">VisÃ£o Geral</div>
              <div class="text-xs text-slate-400 mt-1">EstatÃ­sticas e mÃ©tricas</div>
            </div>
            <div class="glass rounded-xl p-6 hover:bg-white/5 transition-colors cursor-pointer"
              onclick="loadSection('status')">
              <div class="text-3xl mb-2">ğŸ“ˆ</div>
              <div class="font-semibold text-emerald-300">Por Status</div>
              <div class="text-xs text-slate-400 mt-1">AnÃ¡lise de status das solicitaÃ§Ãµes</div>
            </div>
            <div class="glass rounded-xl p-6 hover:bg-white/5 transition-colors cursor-pointer"
              onclick="loadSection('tipo-informacao')">
              <div class="text-3xl mb-2">ğŸ“‘</div>
              <div class="font-semibold text-violet-300">Tipo de InformaÃ§Ã£o</div>
              <div class="text-xs text-slate-400 mt-1">AnÃ¡lise por tipo de informaÃ§Ã£o</div>
            </div>
          </div>
        </div>
      </section>

      <section id="page-esic-overview" style="display: none;">
        <div class="glass rounded-2xl p-6 mb-6">
          <h2 class="neon text-2xl font-bold mb-4">ğŸ“Š VisÃ£o Geral - e-SIC</h2>
          <div id="esicStats" class="grid grid-cols-1 md:grid-cols-4 gap-4">
            <div class="glass rounded-xl p-4">
              <div class="text-slate-400 text-sm mb-1">Total de SolicitaÃ§Ãµes</div>
              <div id="esic-kpi-total" class="text-2xl font-bold text-cyan-300">-</div>
            </div>
            <div class="glass rounded-xl p-4">
              <div class="text-slate-400 text-sm mb-1">Encerradas</div>
              <div id="esic-kpi-encerradas" class="text-2xl font-bold text-emerald-300">-</div>
            </div>
            <div class="glass rounded-xl p-4">
              <div class="text-slate-400 text-sm mb-1">Em Aberto</div>
              <div id="esic-kpi-abertas" class="text-2xl font-bold text-amber-300">-</div>
            </div>
            <div class="glass rounded-xl p-4">
              <div class="text-slate-400 text-sm mb-1">Tempo MÃ©dio</div>
              <div id="esic-kpi-tempo" class="text-2xl font-bold text-violet-300">-</div>
            </div>
          </div>
        </div>
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
          <div class="glass rounded-2xl p-6">
            <h3 class="font-semibold mb-4 text-cyan-400">SolicitaÃ§Ãµes por Status</h3>
            <canvas id="esic-chart-status"></canvas>
          </div>
          <div class="glass rounded-2xl p-6">
            <h3 class="font-semibold mb-4 text-cyan-400">SolicitaÃ§Ãµes por Tipo de InformaÃ§Ã£o</h3>
            <canvas id="esic-chart-tipo-informacao"></canvas>
          </div>
          <div class="glass rounded-2xl p-6">
            <h3 class="font-semibold mb-4 text-cyan-400">Canais por Unidade</h3>
            <canvas id="esic-chart-canal-unidade"></canvas>
          </div>
          <div class="glass rounded-2xl p-6">
            <h3 class="font-semibold mb-4 text-cyan-400">Categorias TemÃ¡ticas (AnÃ¡lise por Assunto)</h3>
            <canvas id="esic-chart-tematico"></canvas>
          </div>
          <div class="glass rounded-2xl p-6 lg:col-span-2">
            <h3 class="font-semibold mb-4 text-cyan-400">EvoluÃ§Ã£o Mensal</h3>
            <canvas id="esic-chart-mensal"></canvas>
          </div>
          <div class="glass rounded-2xl p-6 lg:col-span-2">
            <h3 class="font-semibold mb-4 text-cyan-400">SLA Compliance - % Dentro do Prazo</h3>
            <div id="esic-sla-container" class="flex items-center justify-center p-8">
              <div class="text-4xl font-bold neon" id="esic-sla-value">-%</div>
            </div>
          </div>
        </div>
      </section>

      <section id="page-esic-status" style="display: none;">
        <div class="glass rounded-2xl p-6">
          <h2 class="neon text-2xl font-bold mb-4">ğŸ“ˆ SolicitaÃ§Ãµes por Status</h2>
          <div id="esic-status-ranking" class="mb-6"></div>
          <div id="esic-status-stats" class="mb-6"></div>
          <canvas id="esic-chart-status-detail"></canvas>
        </div>
      </section>

      <section id="page-esic-tipo-informacao" style="display: none;">
        <div class="glass rounded-2xl p-6">
          <h2 class="neon text-2xl font-bold mb-4">ğŸ“‘ SolicitaÃ§Ãµes por Tipo de InformaÃ§Ã£o</h2>
          <div id="esic-tipo-ranking" class="mb-6"></div>
          <canvas id="esic-chart-tipo-informacao-detail"></canvas>
        </div>
      </section>

      <section id="page-esic-responsavel" style="display: none;">
        <div class="glass rounded-2xl p-6">
          <h2 class="neon text-2xl font-bold mb-4">ğŸ‘¤ SolicitaÃ§Ãµes por ResponsÃ¡vel</h2>
          <div id="esic-responsavel-ranking" class="mb-6"></div>
          <canvas id="esic-chart-responsavel-detail"></canvas>
        </div>
      </section>

      <section id="page-esic-unidade" style="display: none;">
        <div class="glass rounded-2xl p-6">
          <h2 class="neon text-2xl font-bold mb-4">ğŸ¢ SolicitaÃ§Ãµes por Unidade</h2>
          <div id="esic-unidade-ranking" class="mb-6"></div>
          <canvas id="esic-chart-unidade-detail"></canvas>
        </div>
      </section>

      <section id="page-esic-canal" style="display: none;">
        <div class="glass rounded-2xl p-6">
          <h2 class="neon text-2xl font-bold mb-4">ğŸ“ SolicitaÃ§Ãµes por Canal</h2>
          <div id="esic-canal-ranking" class="mb-6"></div>
          <canvas id="esic-chart-canal-detail"></canvas>
        </div>
      </section>

      <section id="page-esic-mensal" style="display: none;">
        <div class="glass rounded-2xl p-6">
          <h2 class="neon text-2xl font-bold mb-4">ğŸ“… AnÃ¡lise Mensal</h2>
          <div id="esic-mensal-stats" class="mb-6"></div>
          <canvas id="esic-chart-mensal-detail"></canvas>
        </div>
      </section>
    </main>
  </div>

  <!-- Scripts -->
  <script src="/scripts/utils/lazy-libraries.js"></script>
  <script src="/scripts/utils/logger.js"></script>
  <script src="/scripts/utils/dateUtils.js" defer></script>
  <script src="/scripts/core/config.js"></script>
  <script src="/scripts/core/dataLoader.js"></script>
  <script src="/scripts/core/global-store.js" defer></script>
  <script src="/scripts/core/chart-communication.js" defer></script>
  <script src="/scripts/core/chart-factory.js" defer></script>
  <script src="/scripts/pages/esic/esic-main.js"></script>
</body>

</html>